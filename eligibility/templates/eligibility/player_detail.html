{% extends "eligibility/base.html" %}
{% load bootstrap5 %}

{% block container %}
    <main class="mt-3">
        <div class="card mb-3">
            <h4 class="card-header text-center">Player Detail</h4>
            <table class="table mb-0">
                <tbody>
                <tr>
                    <th class="col-2">Name</th>
                    <td>{{ object.name }}</td>
                    <td class="col-4 text-secondary">The name of the player.</td>
                </tr>
                <tr>
                    <th class="col-2">Country of birth</th>
                    <td>{{ object.birthplace }}</td>
                    <td class="col-4 text-secondary">The country in which the player claims they were born.</td>
                </tr>
                <tr>
                    <th class="col-2">Country of residence</th>
                    <td>{{ object.residency }}</td>
                    <td class="col-4 text-secondary">The country in which the player claims they have residency.
                    </td>
                </tr>
                <tr>
                    <th class="col-2">Eligible for</th>
                    <td>
                        {% for each in object.eligible %}
                            <span>{{ each }}{% if not forloop.last %},{% endif %}</span>
                        {% endfor %}
                    </td>
                    <td class="col-4 text-secondary">
                        The countries that the player is eligible for, based on the information provided.
                    </td>
                </tr>
                </tbody>
            </table>
            <div class="card-body">
                <h5 class="card-subtitle mb-3">Ancestry</h5>
                {% if not object.can_declare_bool %}
                    {#                    {% bootstrap_alert object.unable_to_declare_reason alert_type="warning" dismissible=True %}#}
                {% endif %}
                <div class="row row-cols-1 row-cols-md-2 g-4">
                    {% for parent in object.parent_set.all %}
                        <div class="col">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    {% url 'parent' object.pk parent.pk as parent_url %}
                                    <a href="{{ parent_url }}">{{ parent }}</a>
                                    <span
                                        class="badge rounded-pill bg-{{ parent.adopted|yesno:"info,primary" }}">{{ parent.adopted|yesno:"A,B" }}</span>
                                </div>
                                <ul class="list-group list-group-flush">
                                    {% for grandparent in parent.grandparent_set.all %}
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            {% url 'grandparent' object.pk parent.pk grandparent.pk as grandparent_url %}
                                            <a href="{{ grandparent_url }}">{{ grandparent }}</a>
                                            <span
                                                class="badge rounded-pill bg-{{ grandparent.adopted|yesno:"info,primary" }}">{{ grandparent.adopted|yesno:"A,B" }}</span>
                                        </li>
                                    {% empty %}
                                        <li class="list-group-item">No grandparents entered, please add them.</li>
                                    {% endfor %}
                                </ul>
                                <div class="card-footer">
                                    {% url 'grandparent' object.pk parent.pk as create_grandparent_url %}
                                    {% bootstrap_button "Add a grandparent" button_type="link" href=create_grandparent_url size="small" %}
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
            <div class="card-footer">{% url 'parent' object.pk as create_parent_url %}
                {% bootstrap_button "Add a parent" button_type="link" href=create_parent_url %}
                {% url 'declaration' object.pk as declaration_url %}
                {% with extra_classes=object.can_declare_bool|yesno:",disabled" %}
                    {% bootstrap_button "Make declaration" button_type="link" href=declaration_url extra_classes=extra_classes %}
                {% endwith %}
                {% url 'players' as cancel_url %}
                {% bootstrap_button "Cancel" button_type="link" href=cancel_url button_class="btn-link" %}
            </div>
        </div>
    </main>
{% endblock container %}

{% extends "eligibility/base.html" %}
{% load bootstrap5 %}

{% block container %}
    <main class="mt-3">
        <div class="card mb-3">
            <h4 class="card-header text-center">Administrator Portal</h4>
            <div class="card-body">
                <p>In the <em>Administrator Portal</em>, ...
                    <a href="https://docs.internationaltouch.org/policy/player-eligibility/">FIT&nbsp;Player&nbsp;Eligibility&nbsp;Policy</a>.
                </p>

                <p class="mb-0">...</p>
            </div>
            <table class="table table-fixed table-striped align-middle mb-0">
                <thead>
                <tr>
                    <th scope="col" class="col-4">Name</th>
                    <th scope="col" class="col-4">Eligible for</th>
                    <th scope="col" class="col-4">Declarations</th>
                </tr>
                </thead>
                <tbody>
                {% for declaration in object_list.select_related.distinct %}
                    {% with declaration.player as player %}
                        <tr>
                            <td><a href="{% url 'player' player.pk %}">{{ player }}</a></td>
                            <td>
                                {% for country in declaration.eligible_for %}
                                    {% if forloop.last %}and {% endif %}{% if country == declaration.elected_country.name %}<strong>{{ country }}</strong>{% else %}
                                    {{ country }}{% endif %}{% if not forloop.last %}, {% endif %}
                                {% endfor %}
                            </td>
                            <td>
                                {% url 'declaration' player.pk declaration.pk as url %}
                                {% bootstrap_button declaration.timestamp|date button_type="link" size="small" href=url %}
                            </td>
                        </tr>
                    {% endwith %}
                {% endfor %}
                </tbody>
            </table>
            <div class="card-footer">
                {% url 'index' as cancel_url %}
                {% bootstrap_button "Cancel" button_type="link" href=cancel_url button_class="btn-link" %}
            </div>
        </div>
    </main>
{% endblock container %}
